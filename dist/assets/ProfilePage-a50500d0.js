import{d as H,B as c,u as M,r as o,c as $,w as n,b as t,o as j,a as e,m as Q,n as p,p as z,i as r,x as C,f as d,R as _,aE as W,t as g,aF as X,aI as Y,J as Z,$ as ee,q as ne,aJ as te,y as oe,aK as ae,a6 as D,ak as L,z as le,A as se,aL as re,al as N,_ as ie}from"./index-2f13bec8.js";import{E as ue}from"./ExploreContainer-efbc9862.js";const ce=i=>(le("data-v-28b65bb9"),i=i(),se(),i),_e=["src"],de=ce(()=>d("p",null,[r("Du kannst dein Profilbild ändern, indem du dein Anzeigebild bei Gravatar änderst:"),d("br"),d("a",{href:"http://www.gravatar.com",target:"_blank"},"Avatar ändern")],-1)),fe=H({__name:"ProfilePage",setup(i){const v=c(""),l=c(""),h=c(""),b=c(""),a=M();async function I(){a.getUsername?l.value=a.getUsername:(l.value="",ae.fire({title:"Info",text:"Vergib dir einen Nutzernamen!"}))}const S=s=>{setTimeout(()=>{w(),I(),y(),U(),s.target.complete()},1e3)};async function U(){v.value=a.getSessionID}function w(){b.value=a.getAvatarURL+"?"+new Date().getTime()}function y(){h.value=a.getEmail}function V(){w(),I(),y(),U()}V();async function k(){try{(await D.graphql.request(re,{user_id:a.getSessionID,username:l.value})).error?N.fire({icon:"error",title:"Fehler beim Ändern des Nutzernamens"}):(a.setUsername(l.value),L.fire({icon:"success",title:"Nutzername erfolgreich geändert"}))}catch(s){N.fire({icon:"error",title:"Fehler beim Ändern des Nutzernamens"})}}async function A(){const{error:s}=await D.auth.signOut();s?console.log(s):(a.resetUsername(""),a.resetCurrentDialoguePartner(),a.resetAvatarURL(),L.fire({icon:"success",title:"Logout erfolgreich"}).then(()=>{self.window.location.replace("/login")}))}return(s,u)=>{const E=o("ion-refresher-content"),T=o("ion-refresher"),x=o("ion-avatar"),P=o("ion-col"),B=o("ion-row"),O=o("ion-grid"),K=o("ion-card-content"),q=o("ion-card"),R=o("ion-label"),f=o("ion-item"),F=o("ion-list"),G=o("ion-button"),J=o("ion-footer");return j(),$(t(oe),null,{default:n(()=>[e(t(Q),{message:"Lade Profil ..."}),e(t(C),null,{default:n(()=>[e(t(p),null,{default:n(()=>[e(t(z),null,{default:n(()=>[r("Profil")]),_:1})]),_:1})]),_:1}),e(t(ne),{fullscreen:!0},{default:n(()=>[e(T,{slot:"fixed","pull-factor":.5,"pull-min":100,"pull-max":200,onIonRefresh:u[0]||(u[0]=m=>S(m))},{default:n(()=>[e(E)]),_:1}),e(q,{class:"avatar"},{default:n(()=>[e(K,null,{default:n(()=>[e(O,null,{default:n(()=>[e(B,null,{default:n(()=>[e(P,null,{default:n(()=>[e(x,null,{default:n(()=>[e(x,{style:{width:"100px"}},{default:n(()=>[d("img",{class:"avatarIMG",src:b.value},null,8,_e)]),_:1})]),_:1})]),_:1}),e(P,null,{default:n(()=>[de]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{inset:!0},{default:n(()=>[e(f,null,{default:n(()=>[e(t(_),{"aria-hidden":"true",icon:t(W),slot:"start"},null,8,["icon"]),e(R,null,{default:n(()=>[r(g(v.value),1)]),_:1})]),_:1}),e(f,null,{default:n(()=>[e(t(_),{"aria-hidden":"true",icon:t(X),slot:"start"},null,8,["icon"]),e(R,null,{default:n(()=>[r(g(h.value),1)]),_:1})]),_:1}),e(f,null,{default:n(()=>[e(t(_),{"aria-hidden":"true",icon:t(Y),slot:"start"},null,8,["icon"]),e(t(Z),{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=m=>l.value=m),onKeyup:ee(k,["enter"]),value:l.value,placeholder:"Nutzername"},null,8,["modelValue","onKeyup","value"])]),_:1})]),_:1}),e(t(C),{collapse:"condense"},{default:n(()=>[e(t(p),null,{default:n(()=>[e(t(z),{size:"large"},{default:n(()=>[r(g(l.value),1)]),_:1})]),_:1})]),_:1}),e(ue,{name:"Tab 3 page"})]),_:1}),e(J,null,{default:n(()=>[e(t(p),null,{default:n(()=>[e(G,{id:"logoutButton",shape:"round",onClick:A},{default:n(()=>[e(t(_),{slot:"icon-only",icon:t(te)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}});const ge=ie(fe,[["__scopeId","data-v-28b65bb9"]]);export{ge as default};
