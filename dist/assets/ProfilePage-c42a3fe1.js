import{d as J,B as c,u as M,r as o,c as j,w as n,b as t,o as Q,a as e,m as W,n as p,p as z,i as r,x as D,f as d,a4 as _,aB as X,t as g,aC as Y,aF as Z,J as $,U as ee,q as ne,aG as te,y as oe,aH as ae,V as N,ah as R,z as le,A as se,aI as re,ai as S,_ as ie}from"./index-881c955e.js";import{E as ue}from"./ExploreContainer-6182497f.js";const ce=i=>(le("data-v-28b65bb9"),i=i(),se(),i),_e=["src"],de=ce(()=>d("p",null,[r("Du kannst dein Profilbild ändern, indem du dein Anzeigebild bei Gravatar änderst:"),d("br"),d("a",{href:"http://www.gravatar.com",target:"_blank"},"Avatar ändern")],-1)),fe=J({__name:"ProfilePage",setup(i){const v=c(""),l=c(""),h=c(""),b=c(""),a=M();async function I(){a.getUsername?l.value=a.getUsername:(l.value="",ae.fire({title:"Info",text:"Vergib dir einen Nutzernamen!"}))}const V=s=>{setTimeout(()=>{w(),I(),y(),U(),s.target.complete()},1e3)};async function U(){v.value=a.getSessionID}function w(){b.value=a.getAvatarURL+"?"+new Date().getTime()}function y(){h.value=a.getEmail}function L(){w(),I(),y(),U()}L();async function A(){try{(await N.graphql.request(re,{user_id:a.getSessionID,username:l.value})).error?S.fire({icon:"error",title:"Fehler beim Ändern des Nutzernamens"}):(a.setUsername(l.value),R.fire({icon:"success",title:"Nutzername erfolgreich geändert"}))}catch(s){S.fire({icon:"error",title:"Fehler beim Ändern des Nutzernamens"})}}async function B(){const{error:s}=await N.auth.signOut();s?console.log(s):(a.resetUsername(""),a.resetCurrentDialoguePartner(),a.resetAvatarURL(),R.fire({icon:"success",title:"Logout erfolgreich"}).then(()=>{self.window.location.replace("/login")}))}return(s,u)=>{const T=o("ion-refresher-content"),k=o("ion-refresher"),x=o("ion-avatar"),P=o("ion-col"),E=o("ion-row"),O=o("ion-grid"),q=o("ion-card-content"),F=o("ion-card"),C=o("ion-label"),f=o("ion-item"),G=o("ion-list"),K=o("ion-button"),H=o("ion-footer");return Q(),j(t(oe),null,{default:n(()=>[e(t(W),{message:"Lade Profil ..."}),e(t(D),null,{default:n(()=>[e(t(p),null,{default:n(()=>[e(t(z),null,{default:n(()=>[r("Profil")]),_:1})]),_:1})]),_:1}),e(t(ne),{fullscreen:!0},{default:n(()=>[e(k,{slot:"fixed","pull-factor":.5,"pull-min":100,"pull-max":200,onIonRefresh:u[0]||(u[0]=m=>V(m))},{default:n(()=>[e(T)]),_:1}),e(F,{class:"avatar"},{default:n(()=>[e(q,null,{default:n(()=>[e(O,null,{default:n(()=>[e(E,null,{default:n(()=>[e(P,null,{default:n(()=>[e(x,null,{default:n(()=>[e(x,{style:{width:"100px"}},{default:n(()=>[d("img",{class:"avatarIMG",src:b.value},null,8,_e)]),_:1})]),_:1})]),_:1}),e(P,null,{default:n(()=>[de]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(G,{inset:!0},{default:n(()=>[e(f,null,{default:n(()=>[e(t(_),{"aria-hidden":"true",icon:t(X),slot:"start"},null,8,["icon"]),e(C,null,{default:n(()=>[r(g(v.value),1)]),_:1})]),_:1}),e(f,null,{default:n(()=>[e(t(_),{"aria-hidden":"true",icon:t(Y),slot:"start"},null,8,["icon"]),e(C,null,{default:n(()=>[r(g(h.value),1)]),_:1})]),_:1}),e(f,null,{default:n(()=>[e(t(_),{"aria-hidden":"true",icon:t(Z),slot:"start"},null,8,["icon"]),e(t($),{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=m=>l.value=m),onKeyup:ee(A,["enter"]),value:l.value,placeholder:"Nutzername"},null,8,["modelValue","onKeyup","value"])]),_:1})]),_:1}),e(t(D),{collapse:"condense"},{default:n(()=>[e(t(p),null,{default:n(()=>[e(t(z),{size:"large"},{default:n(()=>[r(g(l.value),1)]),_:1})]),_:1})]),_:1}),e(ue,{name:"Tab 3 page"})]),_:1}),e(H,null,{default:n(()=>[e(t(p),null,{default:n(()=>[e(K,{id:"logoutButton",shape:"round",onClick:B},{default:n(()=>[e(t(_),{slot:"icon-only",icon:t(te)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}});const ge=ie(fe,[["__scopeId","data-v-28b65bb9"]]);export{ge as default};
