import{d as J,B as f,u as M,r as a,c as j,w as n,b as t,o as Q,a as e,m as W,n as h,p as D,i as u,x as S,f as m,a3 as p,aA as X,t as I,aB as Y,aD as Z,J as ee,aE as ne,q as te,aF as oe,y as ae,aG as le,U as z,ag as A,z as se,A as re,aH as ie,ah as N,_ as ue}from"./index-cd9c2231.js";import{E as ce}from"./ExploreContainer-0e0c1124.js";import{c as de}from"./index-d10a0dc9.js";import{p as _e,a as fe}from"./alerts-35ab0858.js";const pe=c=>(se("data-v-ae0ddbd6"),c=c(),re(),c),me=["src"],ge=pe(()=>m("p",null,[u("Du kannst dein Profilbild ändern, indem du dein Anzeigebild bei Gravatar änderst:"),m("br"),m("a",{href:"http://www.gravatar.com",target:"_blank"},"Avatar ändern")],-1)),ve=J({__name:"ProfilePage",setup(c){const d=f(""),s=f(""),g=f(""),b=f(""),l=M();async function y(){l.getUsername?s.value=l.getUsername:(s.value="",le.fire({title:"Info",text:"Vergib dir einen Nutzernamen!"}))}const R=r=>{setTimeout(()=>{w(),y(),C(),U(),r.target.complete()},1e3)};async function U(){d.value=l.getSessionID}function w(){b.value=l.getAvatarURL+"?"+new Date().getTime()}function C(){g.value=l.getEmail}function L(){w(),y(),C(),U()}L();async function T(){try{(await z.graphql.request(ie,{user_id:l.getSessionID,username:s.value})).error?N.fire({icon:"error",title:"Fehler beim Ändern des Nutzernamens"}):(l.setUsername(s.value),A.fire({icon:"success",title:"Nutzername erfolgreich geändert"}))}catch(r){N.fire({icon:"error",title:"Fehler beim Ändern des Nutzernamens"})}}function _(r){try{de(r),_e("Kopiert!")}catch(o){fe("Kopieren fehlgeschlagen!")}}async function V(){const{error:r}=await z.auth.signOut();r?console.log(r):(l.resetUsername(""),l.resetCurrentDialoguePartner(),l.resetAvatarURL(),A.fire({icon:"success",title:"Logout erfolgreich"}).then(()=>{self.window.location.replace("/login")}))}return(r,o)=>{const B=a("ion-refresher-content"),E=a("ion-refresher"),x=a("ion-avatar"),P=a("ion-col"),K=a("ion-row"),O=a("ion-grid"),$=a("ion-card-content"),q=a("ion-card"),k=a("ion-label"),v=a("ion-item"),F=a("ion-list"),G=a("ion-button"),H=a("ion-footer");return Q(),j(t(ae),null,{default:n(()=>[e(t(W),{message:"Lade Profil ..."}),e(t(S),null,{default:n(()=>[e(t(h),null,{default:n(()=>[e(t(D),null,{default:n(()=>[u("Profil")]),_:1})]),_:1})]),_:1}),e(t(te),{fullscreen:!0},{default:n(()=>[e(E,{slot:"fixed","pull-factor":.5,"pull-min":100,"pull-max":200,onIonRefresh:o[0]||(o[0]=i=>R(i))},{default:n(()=>[e(B)]),_:1}),e(q,{class:"avatar"},{default:n(()=>[e($,null,{default:n(()=>[e(O,null,{default:n(()=>[e(K,null,{default:n(()=>[e(P,null,{default:n(()=>[e(x,null,{default:n(()=>[e(x,{style:{width:"100px"}},{default:n(()=>[m("img",{class:"avatarIMG",src:b.value},null,8,me)]),_:1})]),_:1})]),_:1}),e(P,null,{default:n(()=>[ge]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{inset:!0},{default:n(()=>[e(v,null,{default:n(()=>[e(t(p),{"aria-hidden":"true",icon:t(X),slot:"start",onClick:o[1]||(o[1]=i=>_(d.value))},null,8,["icon"]),e(k,{onClick:o[2]||(o[2]=i=>_(d.value))},{default:n(()=>[u(I(d.value),1)]),_:1})]),_:1}),e(v,null,{default:n(()=>[e(t(p),{"aria-hidden":"true",icon:t(Y),slot:"start",onClick:o[3]||(o[3]=i=>_(g.value))},null,8,["icon"]),e(k,null,{default:n(()=>[u(I(g.value),1)]),_:1})]),_:1}),e(v,null,{default:n(()=>[e(t(p),{"aria-hidden":"true",icon:t(Z),slot:"start",onClick:o[4]||(o[4]=i=>_(s.value))},null,8,["icon"]),e(t(ee),{modelValue:s.value,"onUpdate:modelValue":o[5]||(o[5]=i=>s.value=i),onKeyup:ne(T,["enter"]),value:s.value,placeholder:"Nutzername"},null,8,["modelValue","onKeyup","value"])]),_:1})]),_:1}),e(t(S),{collapse:"condense"},{default:n(()=>[e(t(h),null,{default:n(()=>[e(t(D),{size:"large"},{default:n(()=>[u(I(s.value),1)]),_:1})]),_:1})]),_:1}),e(ce,{name:"Tab 3 page"})]),_:1}),e(H,null,{default:n(()=>[e(t(h),null,{default:n(()=>[e(G,{id:"logoutButton",shape:"round",onClick:V},{default:n(()=>[e(t(p),{slot:"icon-only",icon:t(oe)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}});const Ue=ue(ve,[["__scopeId","data-v-ae0ddbd6"]]);export{Ue as default};
